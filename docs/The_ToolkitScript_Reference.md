# Toolkit Script 基础语法 v1.0.0



## 引用定位器

### 坐标

使用花括号包裹的二维坐标数值元组, {x坐标, y坐标}, 可以从coordinate模式的DEVICE SCREEN中获取

例子:

```tks
{200,400}
```

### XML元素

使用花括号包裹的已入库的locator名称, {xml类型的locator名称}, 可以从XML Overlay模式的DEVICE SCREEN中获取

例子:

```tks
{相机按钮}
```

#### 指定查找策略（可选）

默认使用全精确匹配。可以通过 `#策略名` 指定只用某个策略查找：

```tks
{相机按钮}#resourceId    # 只用 resourceId 精确匹配
{确定按钮}#text          # 只用 text 精确匹配
{提交按钮}#className     # 只用 className 精确匹配
{特殊元素}#xpath         # 只用 xpath 精确匹配
```

> **注意**：所有策略均为严格精确匹配，不再使用模糊匹配

### 图片

@开头, 使用花括号包裹的已入库的locator名称, {image类型的locator名称}, 可以从crop模式的DEVICE SCREEN中获取

`````tks
@{加号图标}
`````



## 进程控制

### 启动指定App

FuncName: 启动

Param1: 包名 (必填)

Param2: Activity名字 (必填)

例子: 

```tks
启动 [com.example.test_toolkit, .MainActivity]
```

### 关闭指定App

FuncName: 关闭

Param1: 包名 (必填)

Param2: Activity名字 (必填)

例子: 

```tks
关闭 [com.example.test_toolkit, .MainActivity]
```



## 普通交互

### 点击

FuncName: 点击

Param1: 坐标/XML/图片元素 (必填)

例子:

```tks
点击 [{200,400}]
点击 [{相机按钮}]
点击 [@{加号图标}]
```

### 按压

FuncName: 按压

Param1: 坐标/XML/图片元素 (必填)

Param2: 按压时长/ms (选填, 如果为空则默认按压1000ms)

例子:

```tks
按压 [{200,400}, 500]
按压 [{相机按钮}, 500]
按压 [@{加号图标}, 500]
按压 [{200,400}]
按压 [{相机按钮}]
按压 [@{加号图标}]
```

### 滑动
FuncName: 滑动

Param1: 起点坐标 (必填)

Param2: 终点坐标 (必填)

Param3: 滑动持续时长/ms (选填, 如果为空则默认滑动持续1000ms)

例子:

```tks
滑动 [{200,400}, {300,600}, 1500]
滑动 [{200,400}, {300,600}]
```

### 将元素拖动到某个坐标

FuncName: 拖动

Param1: 坐标/XML/图片元素 (必填)

Param2: 终点坐标 (必填)

Param3: 拖动持续时长/ms (选填, 如果为空则默认拖动持续1000ms)

例子:

```tks
拖动 [{200,400}, {500, 800}, 1500]
拖动 [{200,400}, {500, 800}]
拖动 [{相机按钮}, {500, 800}, 1500]
拖动 [{相机按钮}, {500, 800}]
拖动 [@{加号图标}, {500, 800}, 1500]
拖动 [@{加号图标}, {500, 800}]
```

### 将元素朝着某个方向拖动

FuncName: 定向拖动

Param1: 坐标/XML/图片元素 (必填)

Param2: 方向(up, down, left, right) (必填)

Param3: 拖动距离(必填)

Param4: 拖动持续时长/ms (选填, 如果为空则默认拖动持续1000ms)

例子:

```tks
定向拖动 [{200,400}, up, 300, 1500]
定向拖动 [{200,400}, up, 300]
定向拖动 [{相机按钮}, up, 300, 1500]
定向拖动 [{相机按钮}, up, 300]
定向拖动 [@{加号图标}, up, 300, 1500]
定向拖动 [@{加号图标}, up, 300]
```

## 输入框交互

### 输入文字到输入框

FuncName: 输入

Param1: 坐标/XML/图片的输入框元素 (必填)

Param2: 想要输入的文本内容 (必填)

例子:

```tks
输入 [{300,300}, 这是一个字符串abc123]
输入 [{家庭名称输入框}, 这是一个家庭名称xyz789]
输入 [@{房间名称输入框}, 这是一个房间名称@?!]
```

### 清理输入框中的文字

FuncName: 输入

Param1: 坐标/XML/图片的输入框元素 (必填)

例子:

```tks
清理 [{300,300}]
清理 [{家庭名称输入框}]
清理 [@{房间名称输入框}]
```

### 隐藏输入法软键盘

FuncName: 隐藏键盘

无任何参数

例子:

```tks
隐藏键盘
```

## 时间管理

### 等待

FuncName: 等待

Param1: 等待时长/ms (选填, 如果为空则默认等待1000ms)

例子:

```tks
等待 [500]
等待
```

## 页面控制

## 返回上层界面

FuncName: 返回

无任何参数

例子:

```tks
返回
```

# 断言

## 断言

FuncName: 断言

Param1: XML/图片元素 (必填)

Param2: 存在/不存在/可见/不可见 (必填, 且仅能填入四个枚举的其中之一, 对于图片识别来说存在和可见是等效的 不存在和不可见是等效的)

例子:

```tks
断言 [{相机按钮}, 存在]
断言 [{相机按钮}, 不存在]
断言 [{相机按钮}, 可见]
断言 [{相机按钮}, 不可见]
断言 [@{加号图标}, 存在]
断言 [@{加号图标}, 不存在]
断言 [@{加号图标}, 可见]
断言 [@{加号图标}, 不可见]
```

### 读取文本内容(可以顺便判断是否符合预期文本)

FuncName: 读取

Param1: 中心坐标 或 XML元素 (必填)

Param2: 以中心坐标为中心, 左右扩展识别范围多宽(如果Param1输入了坐标, 则必填, 如果Param1输入了XML元素, 则略过)

Param3: 以中心坐标为中心, 上下扩展识别范围多高(如果Param1输入了坐标, 则必填, 如果Param1输入了XML元素, 则略过)

```tks
读取 [{350,700}, 400, 200]
读取 [{家庭名称卡片}]
读取 [{350,700}, 400, 200] == Test Room
读取 [{家庭名称卡片}] == Test Home
```

